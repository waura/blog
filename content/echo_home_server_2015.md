Title: だれでも組める！ 省電力かつ実用的な自宅サーバー 2015年版
Date: 2015-04-25 19:58
Author: waura
Category: サーバー管理
Tags: サーバー管理
Slug: echo_home_server_2015
Status: published

なぜ自宅サーバーか？
--------------------

「自宅サーバーではなく、VPSを利用すれば安くサーバーを使えるのでは？」と思われる方も多いかと思います。  
たしかに、VPSをレンタルすれば安い費用でサーバーを利用でき、さらに「初期投資が不必要」「サーバーの電気代がかからない」というメリットがあります。  
しかし、自分はファイルサーバーにも使用したいのでファイルを手元に置いておける自宅サーバーを使用することにします。

どんなサーバーを組むのか？
--------------------------

どんなサーバーを組むのかによって、重視するポイントが変わってきます。  
自分は下のような用途でサーバーを使用します。

-   Webサーバー
-   ビルドサーバー
-   ファイルサーバ

ビルドサーバー用途からなるべくCPU性能がいい方がいいし、メモリーも多い方がいい。  
また、ファイルサーバにも使うのでディスク容量もたくさん欲しい。自宅にサーバーを置くので電気代はあまりかからない方がいい。  
...と、要は性能はなるべく高く、かつ電気代はなるべく安くとないものねだりになってしまいした。  
というわけで今回は、通常のデスクトップPCよりは低消費電力かつ、サーバーの用途に支障をきたさない程度のサーバーの構成を考えてみたいと思います。

PCパーツの選択
--------------

サーバーを建てるには、以下のパーツを用意する必要があります。

-   CPU
-   マザーボード
-   メモリー
-   HDDまたはSSD
-   電源
-   PCケース

自分は、電源とPCケースは持ってるもの使用するので、ここではCPU、メモリーとHDD(SSD)を選んで行きます。

### CPU

今現在、デスクトップ向けで低消費電力かつそこそこの性能のCPUは、IntelのCelenron
J1900やPentium J2900等のBay
Trail-Dか、AMDのKabiniアーキテクチャをデスクトップ向けにしたAthlon5350やAthlon5310があります。  
できるだけ高性能なCPUを選びたいので、今回は最上位モデルのIntelのPentium
J2900とAMDのAthlon 5350を候補として比較しました。

| | Athlon5350 | Pentium J2900 |  
|:-------------:|:-------------------------|:-------------------------|  
|周波数 |2.05GHz |2.41GHz |  
|コア数/スレッド数|4コア/4スレッド |4コア/4スレッド |  
|L2キャッシュ |2MB |2MB |  
|内蔵GPU |Radeon R3 Graphics HD 8400|Intel HD Graphics |  
|対応メモリ |DDR3-1600 シングルチャンネル |DDR3-1333
デュアルチャンネル |  
|TDP |25W |10W |  
|おおよその価格※ | 10,000〜　| 13,500〜  

※Pentium
J2900はベアボーンで売られているので、価格の比較はマザーボード込みです。

[ベンチマーク結果](http://www.cpu-monkey.com/en/compare_cpu-amd_athlon_5350-381-vs-intel_pentium_j2900-326)を見たところ、すべてのベンチマークでCPU性能はAthlon
5350が上回っているようでした。

しかし、PassMark CPU以外のベンチマークは差は小さいようです。

例えば、Geekbench 3, 64bit (Multi-Core)でAthlon
5350が「3640」に対してPentium J2900が「3537」など。  
PassMark CPUはAthlon 5350が「2640」に対してPentium J2900が「1931」。

内蔵GPUに関してのスコアもAthlon
5350が上回っているようです。(サーバー用途の場合は重要ではありませんが...)

Athlon5350の方が動作クロックの高いメモリに対応していますが、デュアルチャンネルに非対応です。  
対して、Pentium
J2900は対応しているメモリの動作クロックは低いですが、デュアルチャンネルに対応しています。  
なので対応メモリに関しては、一長一短と判断しました。

消費電力に関しては、Athlon 5350のほうが10W高くなっています。

以上から、性能を取るならAthlon 5350、より低消費電力を取るならPentium
J2900となりそうです。  
自分は下記の理由からAthlon 5350を選びました。

-   TDPの10W差を電気代にすると月に200円ぐらいの差にしかならない(アイドルの時間のほうが多いはずなので実際にはもっと小さくなるはず)
-   Athlon 5350の方がPentium
    J2900より安いので、電気代が多くかかっても1、2年はAthlon5350の方がトータルでは安い
-   Athlon 5350の方がマザーボードの種類が多い

### マザーボード

CPUが決まったら、次はマザーボードを選びます。  
Athlon
5350のソケットはAM1なので、このソケットのマザーボードの中から選びます。  
また、ファイルサーバの用途にも使う関係からHDD(SSD)が多く接続できるSATAポートの多いものを選びました。

SATAポートが多いボードには、ASRockのAM1B-ITXとAM1H-ITXがあります。

これらのボードにはSATAポートが4個ついています。  
Athlon
5350はチップセットがCPU側にあり、そのチップセットがSATA2ポートにしか対応していません。  
しかし、このASRockのマザーボードは、マザーボード側でSATAのポートを増やすためにコントローラーを追加しているようです。  
さすがASRock、変わったマザーボードが多いです。

このAM1B-ITXとAM1H-ITXですが、ほぼ同じボードです。  
違いは、AM1H-ITXはACアダプターに対応しているという点です。  
自分は、ACアダプターを持っておらず、新規に購入するとそこその出費になりそうだったので、AM1B-ITXの方を選びました。

### メモリー

マザーボードが決まったので、次はメモリーです。  
メモリーは使える規格の一番いいものをなるべくたくさん積む方針で行こうと思います。  
メモリーが足りない状況になると、HDDへのアクセスが起きてサーバーの動きが極端に悪くなります。  
ビルドサーバーに使ったり、データベースを使ったりすることを考えると積めるだけ積んで置くことに越したことはないと思います。

Athlon 5350の対応メモリのはDDR3-1600です。  
DDR3-1600のメモリでは、8GBのメモリが1GBあたりの価格が安いようです。  
マザーボードにはメモリのスロットが2つあるので、8GB x 2本 =
16GB積むことにしました。  
メーカーはノーブランドです。

Memtest等でエラーが出たときに交換をしたいという人は、交換に対応した店でメモリーを買うと良いと思います。

### HDDまたはSSD

マーザーボードAM1B-ITXには、4つのSATAポートがあるので最大4つHDD(SSD)が接続できます。  
HDDは、古いサーバーのものがあるのでそれをこちらに接続します。

OSをUbuntu
ServerからCentOSに入れ替えようと思うので、OSを入れる用のHDDだけ買いました。  
データをなるべく入れられるように3TBのHDDを選択しました。

構成
----

| | 選択パーツ| 価格 |  
|:-------------:|:------------------|  ----------------:|  
|CPU | Athlon 5350 |6,350円|  
|マザーボード| ASRock AM1B-ITX |3,627円|  
|メモリ |ノーブランドPC3-12800-DDR3-1600-8GB x 2枚 |13,740円 |  
|HDD | 東芝MD04ACA300 (バルク品)|10,973円|  
|計 | |34,690円|  

以上が今回選んだパーツの構成です。

サーバーのベンチマーク等は、今後の記事で載せていこうと思います。

 

↓届いたパーツ

[![IMG_20150408_201837](http://octworks.orz.hm/wordpress/wp-content/uploads/2015/04/IMG_20150408_201837-300x225.jpg){.alignnone
.size-medium .wp-image-264 width="300"
height="225"}](http://octworks.orz.hm/wordpress/wp-content/uploads/2015/04/IMG_20150408_201837.jpg)

 

 

↓セットアップ中のサーバー

[![IMG_20150408_210434](http://octworks.orz.hm/wordpress/wp-content/uploads/2015/04/IMG_20150408_210434-300x225.jpg){.alignnone
.size-medium .wp-image-265 width="300"
height="225"}](http://octworks.orz.hm/wordpress/wp-content/uploads/2015/04/IMG_20150408_210434.jpg)
